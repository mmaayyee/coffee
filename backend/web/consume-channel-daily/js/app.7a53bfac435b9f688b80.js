webpackJsonp([1],{CuRo:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("CuRo");var s=a("MVMM"),o=a("ez6v"),r=a.n(o),n=(a("qvMO"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]}),l=a("vSla")(null,n,!1,null,null,null).exports,i=a("zO6J"),c=a("aozt"),_=a.n(c),u={data:function(){return{getUserConsumeCountListData:[],getOrgListData:[],getUserConsumeCountListUrl:rootCoffeeStieUrl+"consume-channel-daily-api/get-user-consume-count-list.html",getOrgListUrl:rootCoffeeStieUrl+"consume-channel-daily-api/get-org-list.html",labelPosition:"right",form:{searchDate:""},searchDatePickerOption:{disabledDate:function(t){return t.getTime()>Date.now()}},exportDate:"",exportUrl:"/consume-channel-daily/export?date=",showDateSearch:""}},filters:{formatDate:function(t){return String(t).substr(0,10)}},computed:{},mounted:function(){this.init()},methods:{init:function(){var t=this;this.showDateSearch=String(rootLogin),window.parent.onscroll=function(e){t.scrollMsg()},this.getUserConsumeCountList()},searchDate:function(){console.log("searchDate..",this.form.searchDate),this.getUserConsumeCountListData=[],this.getOrgListData=[],this.getUserConsumeCountList(this.form.searchDate)},exportExcel:function(){},getUserConsumeCountList:function(t){var e=this,a=t?this.getUserConsumeCountListUrl+"?date="+t:this.getUserConsumeCountListUrl;this.exportDate=t||"",_.a.get(a).then(function(a){a.data&&"200"==a.data.code?(0==a.data.data.length&&e.alertMsg("汇总没有数据，请选择其他日期"),e.getUserConsumeCountListData=a.data.data,e.getOrgList(t)):(e.alertMsg(a.data.message),e.getOrgList(t))}).catch(function(a){e.alertMsg("汇总表接口错误"),e.getOrgList(t)})},getOrgList:function(t){var e=this,a=t?this.getOrgListUrl+"?date="+t:this.getOrgListUrl;_.a.get(a).then(function(t){if(t.data&&200==t.data.code){for(var a=t.data.data,s=[],o=0,r=a.length;o<r;o++){var n=0;s[o]={},s[o].organizationGroupName=a[o].organizationGroupName,s[o].total=a[o].total,s[o].list=[];for(var l=a[o].list.length,i=0;i<l;i++)for(var c=a[o].list[i].orgList,_=0,u=c.length;_<u;_++)s[o].list[n]=c[_],0==_&&(s[o].list[n].headFlag=!0,s[o].list[n].headName=a[o].list[i].name,s[o].list[n].rowspanNum=u),n++}e.getOrgListData=s}else e.alertMsg(t.data.message)}).catch(function(t){e.alertMsg("分公司代理商以及包养加盟接口错误")})},alertMsg:function(t,e){this.scrollMsg();var a=e||"error";this.$message({message:t,duration:3600,type:a})},scrollMsg:function(){if(self!=top){var t=window.parent.document.documentElement.scrollTop||window.parent.document.body.scrollTop-50,e=document.getElementsByClassName("el-message")[0];e&&(e.style.cssText="top: "+t+"px;z-index:1000;")}}},components:{}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-body"},["0"!=t.showDateSearch?a("el-form",{ref:"form",attrs:{"label-position":t.labelPosition,model:t.form,size:"small","label-width":"120px"}},[a("el-row",{attrs:{gutter:10}},["1"!=t.showDateSearch?a("el-col",{staticStyle:{width:"350px"}},[a("el-form-item",{attrs:{label:"选择检索日期",prop:"sendTime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期","picker-options":t.searchDatePickerOption},model:{value:t.form.searchDate,callback:function(e){t.$set(t.form,"searchDate",e)},expression:"form.searchDate"}})],1)],1):t._e(),t._v(" "),"1"!=t.showDateSearch?a("el-col",{attrs:{span:10}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.searchDate}},[t._v("检索")])],1):t._e(),t._v(" "),a("el-col",{attrs:{span:4}},["2"!=t.showDateSearch?a("a",{attrs:{href:t.exportUrl+t.exportDate}},[a("el-button",{attrs:{type:"primary",plain:""}},[t._v("导出")])],1):t._e()])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"sub-title",staticStyle:{"margin-top":"0"}},[t._v("汇总表")]),t._v(" "),a("el-table",{staticClass:"el-table-common",attrs:{data:t.getUserConsumeCountListData,border:""}},[a("el-table-column",{attrs:{prop:"title",label:"数据项"}}),t._v(" "),a("el-table-column",{attrs:{prop:"today",label:"本日数据"}}),t._v(" "),a("el-table-column",{attrs:{prop:"last_week_today",label:"上周同期"}}),t._v(" "),a("el-table-column",{attrs:{label:"周同比"},scopedSlots:t._u([{key:"default",fn:function(e){return[Number(e.row.week_compare)<0?a("span",[a("i",{staticClass:"el-icon-download",staticStyle:{color:"green"}})]):Number(e.row.week_compare)>0?a("span",[a("i",{staticClass:"el-icon-upload2",staticStyle:{color:"red"}})]):t._e(),t._v(t._s(e.row.week_compare)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"last_month_today",label:"上月同期"}}),t._v(" "),a("el-table-column",{attrs:{label:"月同比"},scopedSlots:t._u([{key:"default",fn:function(e){return[Number(e.row.month_compare)<0?a("span",[a("i",{staticClass:"el-icon-download",staticStyle:{color:"green"}})]):Number(e.row.month_compare)>0?a("span",[a("i",{staticClass:"el-icon-upload2",staticStyle:{color:"red"}})]):t._e(),t._v(t._s(e.row.month_compare)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"month_begin_and_end",label:"MTD"}}),t._v(" "),a("el-table-column",{attrs:{label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("formatDate")(e.row.date))+"\n      ")]}}])})],1),t._v(" "),t._l(t.getOrgListData,function(e,s){return a("div",{key:s},[a("div",{staticClass:"sub-title",staticStyle:{margin:"10px 0"}},[t._v(t._s(e.organizationGroupName))]),t._v(" "),a("table",{staticClass:"gridtable"},[a("tr",[a("th",[t._v(t._s(0==s?"分公司":"机构名称"))]),t._v(" "),a("th",[t._v("渠道")]),t._v(" "),a("th",[t._v("总台数")]),t._v(" "),a("th",[t._v("商用台数")]),t._v(" "),a("th",[t._v("开机商用台数")]),t._v(" "),a("th",[t._v("新增注册人数")]),t._v(" "),a("th",[t._v("付费销量")]),t._v(" "),a("th",[t._v("销售额")]),t._v(" "),a("th",[t._v("付费台日均")]),t._v(" "),a("th",[t._v("日期")])]),t._v(" "),t._l(e.list,function(e,s){return a("tr",{key:s},[e.headFlag?a("td",{attrs:{rowspan:e.rowspanNum}},[t._v(t._s(e.headName))]):t._e(),t._v(" "),a("td",[t._v(t._s(e.build_type_code))]),t._v(" "),a("td",[t._v(t._s(e.equipments_count))]),t._v(" "),a("td",[t._v(t._s(e.commercial_operation))]),t._v(" "),a("td",[t._v(t._s(e.equipments_be_count))]),t._v(" "),a("td",[t._v(t._s(e.new_register_users))]),t._v(" "),a("td",[t._v(t._s(e.consume_pay_cups))]),t._v(" "),a("td",[t._v(t._s(e.consume_pay_price))]),t._v(" "),a("td",[t._v(t._s(e.pay_daily_average))]),t._v(" "),a("td",[t._v(t._s(t._f("formatDate")(e.total_at)))])])}),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[t._v(t._s(e.total.build_type_code))]),t._v(" "),a("td",[t._v(t._s(e.total.equipments_count))]),t._v(" "),a("td",[t._v(t._s(e.total.commercial_operation))]),t._v(" "),a("td",[t._v(t._s(e.total.equipments_be_count))]),t._v(" "),a("td",[t._v(t._s(e.total.new_register_users))]),t._v(" "),a("td",[t._v(t._s(e.total.consume_pay_cups))]),t._v(" "),a("td",[t._v(t._s(e.total.consume_pay_price))]),t._v(" "),a("td",[t._v(t._s(e.total.pay_daily_average))]),t._v(" "),a("td",[t._v(t._s(t._f("formatDate")(e.total.total_at)))])])],2)])})],2)},staticRenderFns:[]};var p=a("vSla")(u,d,!1,function(t){a("V9FW")},"data-v-0a947fc9",null).exports;s.default.use(i.a);var m=new i.a({routes:[{path:"/",redirect:"/channel"},{path:"/channel",name:"ConsumeChannelDaily",component:p}]});s.default.use(r.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:m,components:{App:l},template:"<App/>"})},V9FW:function(t,e){},qvMO:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7a53bfac435b9f688b80.js.map